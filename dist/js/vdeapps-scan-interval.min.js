"use strict";function _classCallCheck(t,o){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,o){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!o||"object"!=typeof o&&"function"!=typeof o?t:o}function _inherits(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+typeof o);t.prototype=Object.create(o&&o.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(t,o):t.__proto__=o)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_createClass=function(){function t(t,o){for(var s=0;s<o.length;s++){var e=o[s];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}return function(o,s,e){return s&&t(o.prototype,s),e&&t(o,e),o}}(),scanInterval=function(t){function o(){_classCallCheck(this,o);var t=_possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).call(this));return t.setName("scanInterval"),t.status={IDLE:1,RUN:2,STOP:0},t.options={status:t.status.STOP,callback:null,id:null,loop:0,currentLoop:0,autorun:!1},t.joblist={},t}return _inherits(o,t),_createClass(o,[{key:"add",value:function(t,o){_typeof(this.joblist[t])&&this.stop(t).remove(t);var s=merge({},this.options,o);return this.joblist[t]=s,this.joblist[t].status=this.status.STOP,1==this.joblist[t].autorun&&this.run(t),this}},{key:"remove",value:function(t){try{delete this.joblist[t]}catch(t){}return this}},{key:"run",value:function(t){var o=this;try{null==this.joblist[t].id&&(o.joblist[t].status=o.status.STOP,o.joblist[t].callback.apply(),o.joblist[t].status=o.status.IDLE,o.joblist[t].currentLoop+=1,this.joblist[t].id=window.setInterval(function(){if(0!=o.joblist[t].loop&&o.joblist[t].currentLoop==o.joblist[t].loop)console.log("STOP "+t),o.stop(t);else{if(o.joblist[t].status==o.status.RUN)return void console.info("already run");o.joblist[t].currentLoop+=1,console.info(t+" current Loop="+o.joblist[t].currentLoop),o.joblist[t].status=o.status.STOP,o.joblist[t].callback.apply(),o.joblist[t].status=o.status.IDLE}},this.joblist[t].interval))}catch(t){}return this}},{key:"stop",value:function(t){try{void 0!==this.joblist[t]&&(window.clearInterval(this.joblist[t].id),this.joblist[t].id=null,this.joblist[t].status=this.status.STOP)}catch(t){}return this}},{key:"stopall",value:function(){for(var t in this.joblist)this.stop(t)}},{key:"runall",value:function(){for(var t in this.joblist)this.run(t)}},{key:"getjobs",value:function(t){var o=[];for(var s in this.joblist)this.joblist[s].status==t&&o.push(s);return o}}],[{key:"status",value:function(){return{IDLE:1,RUN:2,STOP:0}}}]),o}(vdeappsAddonAbstract);